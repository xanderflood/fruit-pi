#!/usr/bin/env python

import string, sys, struct
import board, busio
import adafruit_ads1x15.ads1115 as ADS
from adafruit_ads1x15.analog_in import AnalogIn

pin = string.atoi(sys.argv[0])
if pin not in [0,1,2,3]:
	os.exit(1)

i2c = busio.I2C(board.SCL, board.SDA)
ads = ADS.ADS1115(i2c)
chan = AnalogIn(ads, pin)

# '<d' means little-endian encoding of a double-precision
voltage = chan.voltage()
voltageB64 = struct.pack('<d', voltage).encode('base64')

print voltageB64
